<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.0.xsd">

	<changeSet author="fabiofernandes81" id="1">
        <createTable remarks="Cadastro de Setores/Lotações do eSocial." tableName="TBR_CAD_2037_STR_PRC">
        	
        	<column name="IDT_STR_PRC" type="NUMBER(22)">
                <constraints nullable="false"/>
            </column>
            
            <column name="IDT_STR_OC" type="NUMBER(22)">
                <constraints nullable="false"/>
            </column>
            
            <column name="COD_THIRD_PARTY" remarks="Código de Terceiros, conforme tabela FXD00035. Este campo pode ser preenchido com código registrado no sistema de origem, com o uso da funcionalidade de DexPara do TAX-BR, " type="VARCHAR2(50)">
                <constraints nullable="false"/>
            </column>

            <column name="NUM_LEGAL_PRC" remarks="Número do Processo Jurídico correspondente ao Cadastro Processo Jurídico (CAD1001). Somente aceito Processo Judicial." type="VARCHAR2(20)">
                <constraints nullable="false"/>
            </column>
            						                                    
            <!-- Framework -->
            <column name="D_LAST_UPDATE_DATE" remarks="Data da última atualização. Campo utilizado pela framework de aplicação de regras de negócio de validação." type="DATE" />           
            <column name="S_LAST_UPDATE_BY" remarks="Responsável pela última atualização. Campo utilizado pela framework de aplicação de regras de negócio de validação." type="VARCHAR2(250)" />
            <column name="D_CREATION_DATE" remarks="Data da criação do registro. Campo utilizado pela framework de aplicação de regras de negócio de validação." type="DATE" />
            <column name="S_CREATED_BY" remarks="Criado por. Campo utilizado pela framework de aplicação de regras de negócio de validação." type="VARCHAR2(250)" />
            
        </createTable>        
    </changeSet>
	
    <changeSet author="fabiofernandes81" id="2">
        <addUniqueConstraint columnNames="IDT_STR_OC, COD_THIRD_PARTY, NUM_LEGAL_PRC" constraintName="UK_TBR_CAD_2037_STR_PRC_001" tableName="TBR_CAD_2037_STR_PRC"/>
    </changeSet>
	
    <changeSet author="fabiofernandes81" id="3">
        <addPrimaryKey columnNames="IDT_STR_PRC" constraintName="PK_TBR_CAD_2037_STR_PRC" tableName="TBR_CAD_2037_STR_PRC"/>
    </changeSet>    

    <changeSet author="fabiofernandes81" id="4">
        <addForeignKeyConstraint baseColumnNames="IDT_STR_OC" baseTableName="TBR_CAD_2037_STR_PRC" constraintName="FK_TBR_CAD_2037_STR_PRC_001"  
                                 referencedColumnNames="IDT_STR_OC" referencedTableName="TBR_CAD_2037_STR_OC"/>
    </changeSet>

</databaseChangeLog>   