<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.0.xsd">

	<changeSet author="fabiofernandes81" id="1">
        <createTable remarks="Cadastro de Setores/Lotações do eSocial." tableName="TBR_CAD_2037_SECTOR">
        	
        	<column name="IDT_SECTOR" remarks="Identificador único do setor/lotação." type="NUMBER(22)">
                <constraints nullable="false"/>
            </column>
            
            <column name="IDT_EMPLR" remarks="Identificador do Empregador" type="NUMBER(22)">
                <constraints nullable="false"/>
            </column>
            
            <column name="COD_SECTOR" remarks="Código da lotação/setor" type="VARCHAR2(30)">
                <constraints nullable="false"/>
            </column>
            						                                    
            <!-- Framework -->
            <column name="D_LAST_UPDATE_DATE" remarks="Data da última atualização. Campo utilizado pela framework de aplicação de regras de negócio de validação." type="DATE" />           
            <column name="S_LAST_UPDATE_BY" remarks="Responsável pela última atualização. Campo utilizado pela framework de aplicação de regras de negócio de validação." type="VARCHAR2(250)" />
            <column name="D_CREATION_DATE" remarks="Data da criação do registro. Campo utilizado pela framework de aplicação de regras de negócio de validação." type="DATE" />
            <column name="S_CREATED_BY" remarks="Criado por. Campo utilizado pela framework de aplicação de regras de negócio de validação." type="VARCHAR2(250)" />
            
        </createTable>        
    </changeSet>
	
    <changeSet author="fabiofernandes81" id="2">
        <addUniqueConstraint columnNames="IDT_EMPLR, COD_SECTOR" constraintName="UK_TBR_CAD_2037_SECTOR_001" tableName="TBR_CAD_2037_SECTOR"/>
    </changeSet>
	
    <changeSet author="fabiofernandes81" id="3">
        <addPrimaryKey columnNames="IDT_SECTOR" constraintName="PK_TBR_CAD_2037_SECTOR" tableName="TBR_CAD_2037_SECTOR"/>
    </changeSet>    

    <changeSet author="fabiofernandes81" id="4">
        <addForeignKeyConstraint baseColumnNames="IDT_EMPLR" baseTableName="TBR_CAD_2037_SECTOR" constraintName="FK_TBR_CAD_2037_SECTOR_001"  
                                 referencedColumnNames="IDT_EMPLR" referencedTableName="TBR_CAD_3016_EMPLR"/>
    </changeSet>

</databaseChangeLog>   