<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.0.xsd">

	<changeSet author="lucasbittencurt" id="1">
        <createTable remarks="Contem o cadastro de ocorrencia das funcoes previstas no quadro de empregados da organizacao. Este cadastro é utilizado para o EFD-Social, e esta relacionado com os eventos de envio para o governo." 
        	tableName="TBR_CAD_1002_JDC_OC">
        	
        	<column name="IDT_JDC_OC" remarks="Identificador da Ocorrencia da Funcao." type="NUMBER(22)">
                <constraints nullable="false"/>
            </column>
            
        	<column name="IDT_JOB_DESCRIPTION" remarks="Identificador do Cadastro da Funcao." type="NUMBER(22)">
                <constraints nullable="false"/>
            </column>
            
        	<column name="DAT_OCCURRENCE" remarks="Data da Ocorrencia." type="DATE">
                <constraints nullable="false"/>
        	</column>
        	
        	<column name="IND_LAYOUT_ESOCIAL" remarks="Informacao de Controle. Indicador utilizado para sinalizar que o layout  utilizado na integracao foi o XML formato eSOCIAL. Preenchido com  S - Layout eSocial. N ou nulo - Layout Thomson Reuters; Domínio DM_SIM_NAO." 
        		type="CHAR(1)" />
        	
        	<column name="COD_OPER" remarks="Informacao de Controle. Indicador da operacao proveniente do layout eSocial. Preenchido com : I - Inclusão; A - Alteracao; E - Exclusão; IA - Inclusão ou Alteracao; Domínio DM_TIPO_OPERACAO_INTEGRACAO." 
        		type="VARCHAR2(2)" />
        	
        	<column name="COD_ID_EVENT" remarks="Identificador único do Evento eSocial (id)" type="VARCHAR2(36)" />
        	
        	<column name="COD_EVENT" remarks="Código do Evento eSocial . Ex: S-1000, S-1020, etc." type="VARCHAR2(36)" />
        	
        	<column name="IND_ENVIRONMENT" remarks="Identificacao do ambiente (tpAmb): 1 - Producao; 2 - Pré-producao - dados reais; 3 - Pré-producao - dados fictícios. Domínio DM_EFD_EVENTO_TIPO_AMBIENTE." 
        		type="CHAR(1)" />
        		
        	<column name="IND_PRC_EMI" remarks="Processo de emissão do evento eSocial (prcEmi) 1- Emissão com aplicativo do empregador Domínio DM_EFD_EVENTO_PROCESSO_EMISSAO." 
        		type="CHAR(1)" />
        		
        	<column name="COD_VS_PROC" remarks="Versão do Processo emissor do evento eSocial (verProc)" type="VARCHAR2(20)" />
        	
        	<column name="IND_OC_EVT" remarks="Indicador de Ocorrencia ou Evento: O - Ocorrencia E - Evento" type="CHAR(1)" />
        	
        	<column name="IND_STATUS" remarks="Indicador do Status" type="CHAR(1)" />
        	
        	<column name="DAT_INSERT_UPDATE" remarks="Date de início de validade do cadastro para o TAX BR." type="DATE">
                <constraints nullable="false"/>
        	</column>
        	
        	<column name="DAT_END_EFFECTIVE" remarks="Data final de validade do cadastro." type="DATE" />
        	
        	<column name="DAT_INSERT_UPDATE_NEW" remarks="Date de início de validade  nova." type="DATE" />
        	
        	<column name="DAT_END_EFFECTIVE_NEW" remarks="Date fim de validade nova." type="DATE" />
        	
        	<column name="DSC_JOB_DESCRIPTION" remarks="Descricao da funcao." type="VARCHAR2(100)" />
        	
        	<column name="COD_OCCUPATION" remarks="Ocupacao, de acordo com a classificacao brasileira de ocupações (CBO). Campo que representa associacao com a Tabela de Referencia do Sistema (ou tabela acessória), vide documentacao específica." 
        		type="VARCHAR2(6)" />
        		
        	<column name="IDT_UPPER_LVL_JDC" type="NUMBER(22)" />
            
            <!-- Framework -->
            <column name="D_LAST_UPDATE_DATE" remarks="Data da ultima atualizacao. Campo utilizado pela framework de aplicacao de regras de negocio de validacao." type="DATE">
            </column>
            <column name="S_LAST_UPDATE_BY" remarks="Responsavel pela ultima atualizacao. Campo utilizado pela framework de aplicacao de regras de negocio de validacao." type="VARCHAR2(250)">
            </column>
            <column name="D_CREATION_DATE" remarks="Data da criacao do registro. Campo utilizado pela framework de aplicacao de regras de negocio de validacao." type="DATE">
            </column>
            <column name="S_CREATED_BY" remarks="Criado por. Campo utilizado pela framework de aplicacao de regras de negocio de validacao." type="VARCHAR2(250)">
            </column>
        </createTable>        
    </changeSet>
	
    <changeSet author="lucasbittencurt" id="2">
        <addUniqueConstraint columnNames="IDT_JOB_DESCRIPTION, DAT_OCCURRENCE" constraintName="UK_TBR_CAD_1002_JOB_OC_001" tableName="TBR_CAD_1002_JDC_OC"/>        
    </changeSet>
	
    <changeSet author="lucasbittencurt" id="3">
        <addPrimaryKey columnNames="IDT_JDC_OC" constraintName="PK_TBR_CAD_1002_JOB_OC" tableName="TBR_CAD_1002_JDC_OC"/>
    </changeSet>    

</databaseChangeLog>   