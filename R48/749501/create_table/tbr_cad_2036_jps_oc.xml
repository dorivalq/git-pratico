<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.0.xsd">

	<changeSet author="lucasbittencurt" id="1">
        <createTable remarks="Cadastro do Empregador do eSocial." tableName="TBR_CAD_2036_JPS_OC">
        	
        	<column name="IDT_JPS_OC" remarks="Identificador da Ocorrência do Cargo." type="NUMBER(22)">
                <constraints nullable="false"/>
            </column>
            
            <column name="IDT_JOB_POSITION" remarks="Identificador do Cadastro do Cargo." type="NUMBER(22)">
                <constraints nullable="false"/>
            </column>
            
            <column name="DAT_OCCURRENCE" remarks="Data da Ocorrênica." type="DATE">
                <constraints nullable="false"/>
            </column>
            
			<column name="IND_LAYOUT_ESOCIAL" remarks="Informação de Controle.   Indicador utilizado para sinalizar que o layout  utilizado na integração foi o XML formato eSOCIAL. Preenchido com  S - Layout eSocial.N ou nulo - Layout Thomson Reuters;Domínio DM_SIM_NAO." 
				type="CHAR(1)"/>
						            
            <column name="COD_OPER" remarks="Informação de Controle. Indicador da operação proveniente do layout eSocial.  Preenchido com : I -Inclusão; A - Alteração; E - Exclusão; IA - Inclusão ou Alteração; Domínio DM_TIPO_OPERACAO_INTEGRACAO." 
            	type="VARCHAR2(2)"/>
                                        
            <column name="COD_ID_EVENT" remarks="Identificador único do Evento eSocial (id)" 
            	type="VARCHAR2(36)"/>
            
            <column name="COD_EVENT" remarks="Código do Evento eSocial . Ex: S-1000, S-1020, etc." 
            	type="VARCHAR2(36)"/>
            	
            <column name="IND_ENVIRONMENT" remarks="Identificação do ambiente (tpAmb): 1 - Produção; 2 - Pré-produção - dados reais; 3 - Pré-produção - dados fictícios. Domínio DM_EFD_EVENTO_TIPO_AMBIENTE." 
            	type="CHAR(1)"/>
            
            <column name="IND_PRC_EMI" remarks="Processo de emissão do evento eSocial (prcEmi) 1- Emissão com aplicativo do empregador Domínio DM_EFD_EVENTO_PROCESSO_EMISSAO." 
            	type="CHAR(1)"/>
            
            <column name="COD_VS_PROC" remarks="Versão do Processo emissor do evento eSocial (verProc)" 
            	type="VARCHAR2(20)"/>
            	
            <column name="IND_OC_EVT" remarks="Indicador de Ocorrência ou Evento: O - Ocorrência E - Evento" 
            	type="CHAR(1)"/>
            
            <column name="IND_STATUS" remarks="Indicador do Status" 
            	type="CHAR(1)"/>
            
            <column name="DAT_INSERT_UPDATE" remarks="Date de início de validade do cadastro para o TAX BR." type="DATE">
                <constraints nullable="false"/>
            </column>
            
            <column name="DAT_END_EFFECTIVE" remarks="Data final de validade do cadastro." type="DATE"/>
            
            <column name="DAT_INSERT_UPDATE_NEW" remarks="Date de início de validade  nova." type="DATE"/>
            
            <column name="DAT_END_EFFECTIVE_NEW" remarks="Date fim de validade nova." type="DATE"/>
            
            <column name="DSC_JOB_POSITION" remarks="Nome do cargo." type="VARCHAR2(100)"/>
            
            <column name="COD_OCCUPATION" remarks="Ocupação, de acordo com a classificação brasileira de ocupações (CBO). Campo que representa associação com a Tabela de Referência do Sistema (ou tabela acessória), vide documentação específica." 
            	type="VARCHAR2(6)"/>
            	
            <column name="IND_ACCUMULATE" remarks="Indicador de Acumulação de Cargo 1 - Não acumulável; 2 - Profissional de Saúde; 3 - Professor; 4 - Técnico/Científico." 
            	type="CHAR(1)"/>
            
            <column name="IND_TIME_COUNT" remarks="Contagem de tempo especial 1 - Não; 2 - Professor (Infantil, Fundamental e Médio); 3 - Professor de Ensino Superior, Magistrado, Membro de Ministério Público, Membro do Tributnal de Contas" 
            	type="CHAR(1)"/>
            	
            <column name="IND_EXCLUSIVE_DEDICATION" remarks="Cargo de dedicação exclusiva S - Sim; N - Não." 
            	type="CHAR(1)"/>
            	
            <column name="NUM_LAW" remarks="TNúmero da Lei" type="VARCHAR2(12)" />
            
            <column name="DAT_LAW" remarks="Data da Lei" type="DATE" />
            
            <column name="IND_SITUATION" remarks="Situação gerada pela Lei.  1 - Criação; 2 - Extinção; 3 - Reestruturação." type="CHAR(1)" />
            
            <column name="IDT_UPPER_LVL_JPS" remarks="Tipo de inscrição do Empregador (tpInsc) 1 – CNPJ 2 – CPF Domínio DM_EFD_EVENTO_TP_INSCRICAO. " type="NUMBER(22)" />
            
            <!-- Framework -->
            <column name="D_LAST_UPDATE_DATE" remarks="Data da última atualização. Campo utilizado pela framework de aplicação de regras de negócio de validação." type="DATE" />           
            <column name="S_LAST_UPDATE_BY" remarks="Responsável pela última atualização. Campo utilizado pela framework de aplicação de regras de negócio de validação." type="VARCHAR2(250)" />
            <column name="D_CREATION_DATE" remarks="Data da criação do registro. Campo utilizado pela framework de aplicação de regras de negócio de validação." type="DATE" />
            <column name="S_CREATED_BY" remarks="Criado por. Campo utilizado pela framework de aplicação de regras de negócio de validação." type="VARCHAR2(250)" />
            
        </createTable>        
    </changeSet>
	
    <changeSet author="fabiofernandes81" id="2">
        <addUniqueConstraint columnNames="IDT_JOB_POSITION, DAT_OCCURRENCE" constraintName="UK_TBR_CAD_2036_JOB_OC_001" tableName="TBR_CAD_2036_JPS_OC"/>
    </changeSet>
	
    <changeSet author="fabiofernandes81" id="3">
        <addPrimaryKey columnNames="IDT_JPS_OC" constraintName="PK_TBR_CAD_2036_JOB_OC" tableName="TBR_CAD_2036_JPS_OC"/>
    </changeSet>    

    <changeSet author="fabiofernandes81" id="4">
        <addForeignKeyConstraint baseColumnNames="IDT_UPPER_LVL_JPS" baseTableName="TBR_CAD_2036_JPS_OC" constraintName="FK_TBR_CAD_2036_JOB_OC_002"  
                                 referencedColumnNames="IDT_JPS_OC" referencedTableName="TBR_CAD_2036_JPS_OC"/>
    </changeSet>

   

</databaseChangeLog>   