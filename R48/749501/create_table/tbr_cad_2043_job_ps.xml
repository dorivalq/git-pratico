<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.0.xsd">

	<changeSet author="lucasbittencurt" id="1">
        <createTable remarks="Contém o cadastro dos cargos previstos no quadro de empregados da organização. Este cadastro é utilizado para o EFD-Social, e está relacionado com os eventos de envio para o governo." 
        	tableName="TBR_CAD_2036_JOB_PS">
        	
        	<column name="IDT_JOB_POSITION" remarks="Identificador único do cargo no cadastro." type="NUMBER(22)">
                <constraints nullable="false"/>
            </column>
            
            <column name="IDT_EMPLR" remarks="Identificador do empregador" type="NUMBER(22)">
                <constraints nullable="false"/>
            </column>
            
            <column name="COD_JOB_POSITION" remarks="Codigo do cargo" type="VARCHAR2(30)">
                <constraints nullable="false"/>
            </column>
            
            <!-- Framework -->
            <column name="D_LAST_UPDATE_DATE" remarks="Data da última atualização. Campo utilizado pela framework de aplicação de regras de negócio de validação." type="DATE">
            </column>
            <column name="S_LAST_UPDATE_BY" remarks="Responsável pela última atualização. Campo utilizado pela framework de aplicação de regras de negócio de validação." type="VARCHAR2(250)">
            </column>
            <column name="D_CREATION_DATE" remarks="Data da criação do registro. Campo utilizado pela framework de aplicação de regras de negócio de validação." type="DATE">
            </column>
            <column name="S_CREATED_BY" remarks="Criado por. Campo utilizado pela framework de aplicação de regras de negócio de validação." type="VARCHAR2(250)">
            </column>
        </createTable>        
    </changeSet>
	
    <changeSet author="fabiofernandes81" id="2">
        <addUniqueConstraint columnNames="IDT_EMPLR, COD_JOB_POSITION" constraintName="UK_TBR_CAD_2036_JOB_PS_001" tableName="TBR_CAD_2036_JOB_PS"/>        
    </changeSet>
	
    <changeSet author="fabiofernandes81" id="3">
        <addPrimaryKey columnNames="IDT_JOB_POSITION" constraintName="PK_TBR_CAD_2036_JOB_PS" tableName="TBR_CAD_2036_JOB_PS"/>
    </changeSet>    

    <changeSet author="fabiofernandes81" id="4">
        <addForeignKeyConstraint baseColumnNames="IDT_EMPLR" baseTableName="TBR_CAD_2036_JOB_PS" constraintName="FK_TBR_CAD_2036_JOB_PS_001"  
        						 referencedColumnNames="IDT_EMPLR" referencedTableName="TBR_CAD_3016_EMPLR"/>
    </changeSet>    
</databaseChangeLog>   